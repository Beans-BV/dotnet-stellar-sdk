// Automatically generated by xdrgen
// DO NOT EDIT or your changes may be overwritten

namespace stellar_dotnet_sdk.xdr;

// === xdr source ============================================================

//  union SCAddress switch (SCAddressType type)
//  {
//  case SC_ADDRESS_TYPE_ACCOUNT:
//      AccountID accountId;
//  case SC_ADDRESS_TYPE_CONTRACT:
//      Hash contractId;
//  };

//  ===========================================================================
public class SCAddress
{
    public SCAddressType Discriminant { get; set; } = new();

    public AccountID AccountId { get; set; }
    public Hash ContractId { get; set; }

    public static void Encode(XdrDataOutputStream stream, SCAddress encodedSCAddress)
    {
        stream.WriteInt((int)encodedSCAddress.Discriminant.InnerValue);
        switch (encodedSCAddress.Discriminant.InnerValue)
        {
            case SCAddressType.SCAddressTypeEnum.SC_ADDRESS_TYPE_ACCOUNT:
                AccountID.Encode(stream, encodedSCAddress.AccountId);
                break;
            case SCAddressType.SCAddressTypeEnum.SC_ADDRESS_TYPE_CONTRACT:
                Hash.Encode(stream, encodedSCAddress.ContractId);
                break;
        }
    }

    public static SCAddress Decode(XdrDataInputStream stream)
    {
        var decodedSCAddress = new SCAddress();
        var discriminant = SCAddressType.Decode(stream);
        decodedSCAddress.Discriminant = discriminant;
        switch (decodedSCAddress.Discriminant.InnerValue)
        {
            case SCAddressType.SCAddressTypeEnum.SC_ADDRESS_TYPE_ACCOUNT:
                decodedSCAddress.AccountId = AccountID.Decode(stream);
                break;
            case SCAddressType.SCAddressTypeEnum.SC_ADDRESS_TYPE_CONTRACT:
                decodedSCAddress.ContractId = Hash.Decode(stream);
                break;
        }

        return decodedSCAddress;
    }
}
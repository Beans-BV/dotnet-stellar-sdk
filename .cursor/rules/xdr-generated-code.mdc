---
description: XDR generated code protection - never edit manually
globs: "StellarDotnetSdk.Xdr/**/*"
alwaysApply: true
---
# XDR Generated Code

XDR files are auto-generated from `.x` definition files and must never be edited manually.

<rule>
name: xdr_generated_code
description: Prevent manual edits to auto-generated XDR files

filters:
  - type: file_change
    pattern: "StellarDotnetSdk\\.Xdr/.*\\.cs$"
  - type: file_create
    pattern: "StellarDotnetSdk\\.Xdr/.*\\.cs$"

actions:
  - type: reject
    conditions:
      - pattern: "StellarDotnetSdk\\.Xdr/.*\\.cs$"
        message: "STOP: XDR .cs files are auto-generated. Never edit manually."

  - type: enforce
    message: |
      XDR GENERATED CODE - READ ONLY

      **NEVER EDIT MANUALLY**:
      - Any `.cs` file in `StellarDotnetSdk.Xdr/`
      - These are generated from `.x` XDR definition files

      **IF XDR CHANGES ARE NEEDED**:
      1. Locate the corresponding `.x` source file in `StellarDotnetSdk.Xdr/`
      2. Modify the `.x` XDR definition file
      3. Run XDR generator (see `generate-xdr.bat` or equivalent)
      4. Commit both the `.x` source and regenerated `.cs` files

      **XDR LAYER PURPOSE**:
      - Low-level Stellar protocol types
      - Binary serialization/deserialization (XDR format)
      - Foundation for SDK domain models

      **RELATIONSHIP TO SDK**:
      - `StellarDotnetSdk/` domain models WRAP XDR types
      - Never expose raw XDR types in public APIs
      - Convert XDR â†” Domain at layer boundaries

      **EXAMPLE .x FILES**:
      - `Stellar-types.x` - Core type definitions
      - `Stellar-transaction.x` - Transaction structures
      - `Stellar-ledger-entries.x` - Ledger entry types

examples:
  - input: "I need to add a new field to an XDR type"
    output: "Modify the .x file, regenerate, never edit .cs directly"

  - input: "There's a bug in XDR serialization"
    output: "Check .x definition first, then generator logic - not the .cs output"

metadata:
  priority: critical
  version: 1.0
  enforcement: strict
</rule>
